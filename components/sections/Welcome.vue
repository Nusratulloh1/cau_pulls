<template>
    <div id="section1" class="h-screen welcome">
        <!-- Background Video -->
        <video autoplay muted loop class="video-bg">
            <source src="@/assets/videos/1.mp4" type="video/mp4" />
            Your browser does not support the video tag.
        </video>
        <div ref="navWelcome">
            <Navbar logo-type="blur" />
        </div>
        <div class="overlay" ref="welcomeContainer">
            <div
                class="px-4 sm:px-12 h-full flex flex-wrap lg:flex-nowrap justify-center items-center lg:justify-between lg:items-end relative">
                <div class=" text-center sm:text-start">
                    <div ref="title">
                        <h4 class=" text-xl sm:text-[32px] opacity-50">
                            CAU Puls
                        </h4>
                        <h2 class="text-[32px] sm:text-[64px] sm:leading-[76.8px]">
                            Добро пожаловать!
                        </h2>
                    </div>
                    <p ref="text" class="text-base sm:text-xl mt-3 sm:mt-5 w-full max-w-[534px]">
                        Искусственный интеллект и телемедицина для заботы о вашем здоровье: проверка симптомов,
                        рекомендации
                        и поддержка — всё в одном приложении
                    </p>
                    <button ref="moreButton"
                        class=" bg-white rounded-[22px] font-bold text-[#39444C] sm:text-xl px-4 sm:px-9 py-3 sm:py-4 mt-6 sm:mt-10">
                        Узнать больше
                    </button>
                </div>
                <div class=" absolute lg:relative bottom-4 lg:bottom-0 flex items-center flex-wrap gap-4 lg:block ">
                    <p ref="downloadText" class=" w-[114px] sm:w-auto">
                        Скaчать можно тут
                    </p>
                    <div class="flex items-center lg:mt-6 gap-3">
                        <button ref="downloadApple"
                            class=" bg-white rounded-[22px] font-bold text-[#39444C] p-3 sm:px-9  sm:py-4 ">
                            <svg class=" w-20 h-5 sm:w-auto sm:h-auto" width="98" height="23" viewBox="0 0 98 23"
                                fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M36.4209 15.9011L35.3952 12.8702H31.1215L30.0959 15.9011H28.2854L32.3337 4.68688H34.2141L38.2624 15.9011H36.4209ZM33.235 6.55204L31.5644 11.4714H34.9523L33.2817 6.55204H33.235ZM43.6783 7.37581C45.8306 7.37581 47.2448 9.06222 47.2448 11.6812C47.2448 14.2924 45.8384 15.9866 43.7171 15.9866C42.505 15.9866 41.5492 15.4504 41.0441 14.5178H41.0131V18.66H39.3269V7.4613H40.9509V8.86017H40.9898C41.4637 7.9509 42.505 7.37581 43.6783 7.37581ZM43.2509 14.5567C44.6185 14.5567 45.5198 13.4298 45.5198 11.6812C45.5198 9.9404 44.6185 8.80576 43.2509 8.80576C41.9144 8.80576 41.0053 9.96372 40.9975 11.6812C41.0053 13.4065 41.9066 14.5567 43.2509 14.5567ZM52.9404 7.37581C55.0928 7.37581 56.5069 9.06222 56.5069 11.6812C56.5069 14.2924 55.1005 15.9866 52.9793 15.9866C51.7671 15.9866 50.8114 15.4504 50.3063 14.5178H50.2752V18.66H48.5891V7.4613H50.213V8.86017H50.2519C50.7259 7.9509 51.7671 7.37581 52.9404 7.37581ZM52.513 14.5567C53.8806 14.5567 54.7819 13.4298 54.7819 11.6812C54.7819 9.9404 53.8806 8.80576 52.513 8.80576C51.1766 8.80576 50.2674 9.96372 50.2597 11.6812C50.2674 13.4065 51.1688 14.5567 52.513 14.5567ZM61.1924 12.777H62.9096C63.034 13.8883 64.114 14.6188 65.5904 14.6188C67.0046 14.6188 68.0225 13.8883 68.0225 12.8858C68.0225 12.0154 67.4086 11.4947 65.9556 11.1372L64.5025 10.7875C62.4434 10.2901 61.4877 9.32645 61.4877 7.76439C61.4877 5.82929 63.1738 4.50037 65.5671 4.50037C67.937 4.50037 69.561 5.82929 69.6154 7.76439H67.9214C67.8204 6.64529 66.8958 5.96918 65.5437 5.96918C64.1917 5.96918 63.2671 6.65307 63.2671 7.64781C63.2671 8.44051 63.8576 8.90679 65.3029 9.26428L66.5383 9.56737C68.8383 10.1114 69.7941 11.0362 69.7941 12.676C69.7941 14.7743 68.1235 16.0876 65.466 16.0876C62.9796 16.0876 61.3012 14.8053 61.1924 12.777ZM71.69 5.56506H73.3684V7.4613H74.9846V8.79022H73.3684V13.5075C73.3684 14.238 73.6947 14.58 74.4018 14.58C74.5805 14.58 74.868 14.5567 74.9768 14.5411V15.87C74.7903 15.9167 74.3941 15.9555 74.0289 15.9555C72.3427 15.9555 71.69 15.3105 71.69 13.6785V8.79022H70.5245V7.4613H71.69V5.56506ZM80.0197 16.0022C77.5799 16.0022 76.0258 14.3391 76.0258 11.6812C76.0258 9.03114 77.5876 7.3525 80.0197 7.3525C82.4518 7.3525 84.0059 9.02337 84.0059 11.6812C84.0059 14.3391 82.4596 16.0022 80.0197 16.0022ZM80.0197 14.6033C81.4494 14.6033 82.2964 13.5231 82.2964 11.6812C82.2964 9.83937 81.4494 8.75136 80.0197 8.75136C78.59 8.75136 77.7353 9.84714 77.7353 11.6812C77.7353 13.5231 78.59 14.6033 80.0197 14.6033ZM85.3579 15.9011V7.4613H86.9663V8.88348H86.9974C87.2616 7.94313 88.0386 7.37581 89.0332 7.37581C89.2197 7.37581 89.4606 7.39913 89.5927 7.43798V9.01559C89.4528 8.96119 89.1031 8.90679 88.8545 8.90679C87.7433 8.90679 87.044 9.67617 87.044 10.8652V15.9011H85.3579ZM94.216 8.72805C93.0038 8.72805 92.1258 9.614 92.0325 10.9118H96.3139C96.2751 9.59846 95.4437 8.72805 94.216 8.72805ZM96.3062 13.4298H97.9146C97.6737 14.9452 96.1896 16.0022 94.2937 16.0022C91.846 16.0022 90.3231 14.3546 90.3231 11.7123C90.3231 9.06999 91.8616 7.3525 94.2237 7.3525C96.5393 7.3525 98.0001 8.96119 98.0001 11.518V12.1086H92.0247V12.2097C92.0247 13.6707 92.9416 14.6344 94.3247 14.6344C95.3038 14.6344 96.0731 14.1681 96.3062 13.4298Z"
                                    fill="#39444C" />
                                <path
                                    d="M17.1952 20.1445C16.2323 21.5466 15.2363 22.9401 13.6637 22.9693C12.116 22.9985 11.6198 22.0565 9.85376 22.0565C8.08585 22.0565 7.5328 22.9401 6.07152 22.9985C4.55333 23.0551 3.39892 21.4842 2.42808 20.0884C0.444687 17.2345 -1.06912 12.019 0.96679 8.49934C1.97497 6.75137 3.7815 5.64542 5.73916 5.61623C7.2301 5.5889 8.63854 6.61711 9.5492 6.61711C10.4613 6.61711 12.1708 5.38263 13.968 5.5637C14.7203 5.59464 16.8317 5.86554 18.1877 7.84123C18.0805 7.91136 15.6674 9.30925 15.6969 12.2215C15.7264 15.7004 18.7584 16.8568 18.7936 16.8725C18.7662 16.9543 18.309 18.5234 17.1952 20.1445ZM10.5924 1.7421C11.4247 0.770909 12.8311 0.0485383 13.9917 0C14.14 1.34903 13.595 2.69993 12.79 3.67336C11.9833 4.64505 10.6629 5.40197 9.36709 5.30091C9.19101 3.98107 9.84414 2.60459 10.5924 1.7421Z"
                                    fill="#39444C" />
                            </svg>

                        </button>
                        <button ref="donwloadPlay"
                            class=" bg-white rounded-[22px] font-bold text-[#39444C] p-3 sm:px-9  sm:py-4 ">
                            <svg class=" w-20 h-5 sm:w-auto sm:h-auto" width="100" height="22" viewBox="0 0 100 22"
                                fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd" clip-rule="evenodd"
                                    d="M85.1243 14.2995H85.8951V4.39954H85.1243V14.2995ZM82.6065 13.4745C83.0861 12.8343 83.3259 11.9706 83.3259 10.8835V10.774C83.3259 9.65247 83.0882 8.7759 82.6129 8.14426C82.1419 7.51262 81.491 7.1968 80.6603 7.1968C79.7096 7.1968 78.9838 7.56848 78.4828 8.31184L78.4443 7.32571H77.7313V16.9808H78.4957V13.423C79.001 14.0933 79.7289 14.4284 80.6795 14.4284C81.4846 14.4284 82.1269 14.1105 82.6065 13.4745ZM82.0091 8.64055C82.3731 9.15618 82.5551 9.85872 82.5551 10.7482C82.5551 11.7322 82.3731 12.4841 82.0091 13.004C81.6494 13.5197 81.1463 13.7775 80.4997 13.7775C80.0329 13.7775 79.6283 13.6722 79.2857 13.4616C78.9431 13.2511 78.6798 12.946 78.4957 12.5464V9.20129C78.6755 8.76731 78.9346 8.43645 79.2729 8.20872C79.6111 7.98098 80.0158 7.86711 80.4868 7.86711C81.1377 7.86711 81.6451 8.12493 82.0091 8.64055ZM92.376 14.2995C92.2989 14.0804 92.2497 13.756 92.2283 13.3263C91.9585 13.6786 91.6138 13.9515 91.1942 14.1448C90.7788 14.3339 90.3377 14.4284 89.871 14.4284C89.203 14.4284 88.6613 14.2415 88.246 13.8677C87.8349 13.4939 87.6293 13.0212 87.6293 12.4497C87.6293 11.7708 87.9098 11.2337 88.4708 10.8384C89.036 10.4431 89.8218 10.2454 90.828 10.2454H92.2219V9.45266C92.2219 8.95422 92.0677 8.56321 91.7594 8.27961C91.4554 7.99172 91.01 7.84778 90.4234 7.84778C89.8881 7.84778 89.4449 7.98528 89.0938 8.26028C88.7427 8.53528 88.5671 8.86614 88.5671 9.25286L87.7963 9.24641C87.7963 8.69211 88.0533 8.21301 88.5671 7.80911C89.081 7.4009 89.7126 7.1968 90.4619 7.1968C91.237 7.1968 91.8472 7.39231 92.2925 7.78333C92.7421 8.17004 92.9734 8.71145 92.9862 9.40754V12.7075C92.9862 13.3822 93.0569 13.887 93.1982 14.2222V14.2995H92.376ZM89.9609 13.7452C90.4748 13.7452 90.933 13.6206 91.3355 13.3714C91.7423 13.1222 92.0377 12.7892 92.2219 12.3724V10.8384H90.8473C90.0808 10.847 89.4813 10.9888 89.0488 11.2638C88.6164 11.5345 88.4001 11.9083 88.4001 12.3853C88.4001 12.7763 88.5436 13.1007 88.8305 13.3585C89.1216 13.6163 89.4985 13.7452 89.9609 13.7452ZM99.1717 7.32571L97.142 13.1909L94.9838 7.32571H94.1424L96.763 14.2415L96.4226 15.1825C96.2599 15.638 96.0607 15.9581 95.8252 16.1429C95.594 16.332 95.29 16.4265 94.9131 16.4265L94.5149 16.3878L94.5213 17.0259C94.7312 17.0861 94.9281 17.1161 95.1123 17.1161C95.9087 17.1161 96.4975 16.6929 96.8786 15.8464L97.0328 15.4855L100 7.32571H99.1717ZM37.486 7.10654L38.2182 6.41045C37.5459 5.77021 36.8565 5.30615 36.15 5.01826C35.4434 4.72607 34.6898 4.57998 33.8891 4.57998C32.8999 4.57998 32.0135 4.79912 31.2299 5.2374C30.4463 5.67139 29.8296 6.2751 29.38 7.04853C28.9304 7.82197 28.7056 8.65771 28.7056 9.55576C28.7056 10.7632 29.0974 11.8267 29.881 12.7462C30.9002 13.9407 32.2833 14.538 34.0304 14.538C35.4691 14.538 36.6167 14.1083 37.4732 13.2489C38.3338 12.3853 38.7685 11.2208 38.777 9.75557H34.7048V10.6708H37.7172C37.593 11.5474 37.1948 12.2606 36.5225 12.8106C35.8502 13.3606 35.0281 13.6356 34.0561 13.6356C33.2553 13.6356 32.5188 13.453 31.8465 13.0878C31.1742 12.7183 30.6475 12.2134 30.2664 11.5731C29.8853 10.9286 29.6948 10.2497 29.6948 9.53643C29.6948 8.84033 29.8789 8.18076 30.2471 7.55771C30.6154 6.93037 31.1335 6.43408 31.8015 6.06885C32.4738 5.70361 33.1804 5.521 33.9212 5.521C34.5164 5.521 35.1266 5.65635 35.7518 5.92705C36.3812 6.19346 36.9593 6.58662 37.486 7.10654ZM46.4077 8.27959C45.7012 7.49756 44.8105 7.10654 43.7357 7.10654C42.6566 7.10654 41.7638 7.49971 41.0572 8.28603C40.4149 8.99932 40.0938 9.8415 40.0938 10.8126C40.0938 11.7923 40.4321 12.6495 41.1086 13.3843C41.7895 14.1147 42.6652 14.48 43.7357 14.48C44.8019 14.48 45.6733 14.1147 46.3499 13.3843C47.0307 12.6495 47.3712 11.7923 47.3712 10.8126C47.3712 9.83721 47.05 8.99287 46.4077 8.27959ZM41.8152 8.821C42.3504 8.2667 42.9906 7.98955 43.7357 7.98955C44.4765 7.98955 45.1145 8.2667 45.6498 8.821C46.1893 9.37529 46.4591 10.0456 46.4591 10.8319C46.4591 11.339 46.337 11.8116 46.093 12.2499C45.8489 12.6882 45.5192 13.0276 45.1038 13.2683C44.6884 13.5046 44.2324 13.6228 43.7357 13.6228C43.239 13.6228 42.7829 13.5046 42.3676 13.2683C41.9522 13.0276 41.6225 12.6882 41.3784 12.2499C41.1343 11.8116 41.0123 11.339 41.0123 10.8319C41.0123 10.0456 41.2799 9.37529 41.8152 8.821ZM52.3555 7.10654C53.4303 7.10654 54.321 7.49756 55.0275 8.27959C55.6698 8.99287 55.991 9.83721 55.991 10.8126C55.991 11.7923 55.6506 12.6495 54.9697 13.3843C54.2931 14.1147 53.4217 14.48 52.3555 14.48C51.285 14.48 50.4093 14.1147 49.7284 13.3843C49.0519 12.6495 48.7136 11.7923 48.7136 10.8126C48.7136 9.8415 49.0348 8.99932 49.6771 8.28603C50.3836 7.49971 51.2764 7.10654 52.3555 7.10654ZM52.3555 7.98955C51.6104 7.98955 50.9703 8.2667 50.435 8.821C49.8997 9.37529 49.6321 10.0456 49.6321 10.8319C49.6321 11.339 49.7541 11.8116 49.9982 12.2499C50.2423 12.6882 50.572 13.0276 50.9874 13.2683C51.4027 13.5046 51.8588 13.6228 52.3555 13.6228C52.8522 13.6228 53.3083 13.5046 53.7236 13.2683C54.139 13.0276 54.4687 12.6882 54.7128 12.2499C54.9569 11.8116 55.0789 11.339 55.0789 10.8319C55.0789 10.0456 54.8091 9.37529 54.2696 8.821C53.7343 8.2667 53.0963 7.98955 52.3555 7.98955ZM64.5915 7.28701H63.6859V8.50518C63.2662 8.00674 62.8295 7.6501 62.3756 7.43525C61.9259 7.21611 61.4399 7.10654 60.9175 7.10654C60.288 7.10654 59.6886 7.26982 59.119 7.59639C58.5538 7.92295 58.1106 8.36768 57.7895 8.93057C57.4683 9.48916 57.3077 10.0929 57.3077 10.7417C57.3077 11.3905 57.4619 11.9856 57.7702 12.5271C58.0785 13.0685 58.5153 13.5003 59.0805 13.8226C59.6457 14.1405 60.2495 14.2995 60.8918 14.2995C61.4399 14.2995 61.9581 14.1856 62.4462 13.9579C62.9344 13.7259 63.3476 13.395 63.6859 12.9653V13.3263C63.6859 14.0997 63.5959 14.6604 63.4161 15.0085C63.2363 15.3565 62.9344 15.6444 62.5104 15.8722C62.0908 16.1042 61.5748 16.2202 60.9625 16.2202C60.3416 16.2202 59.8213 16.1085 59.4017 15.8851C58.982 15.6616 58.6394 15.3179 58.374 14.8538H57.3976C57.6503 15.4038 57.9265 15.8206 58.2262 16.1042C58.526 16.3921 58.9135 16.6198 59.3888 16.7874C59.8684 16.9593 60.4079 17.0452 61.0074 17.0452C61.8253 17.0452 62.5254 16.8712 63.1078 16.5231C63.6902 16.1751 64.0991 15.6788 64.3346 15.0343C64.5059 14.5788 64.5915 13.8591 64.5915 12.8751V7.28701ZM59.6136 8.35049C60.0504 8.10127 60.5236 7.97666 61.0331 7.97666C61.5213 7.97666 61.9773 8.09697 62.4012 8.3376C62.8252 8.57822 63.1528 8.90693 63.384 9.32373C63.6152 9.73623 63.7308 10.2067 63.7308 10.7353C63.7308 11.5474 63.4782 12.2026 62.9729 12.7011C62.4719 13.1995 61.8082 13.4487 60.9817 13.4487C60.1639 13.4487 59.498 13.1974 58.9842 12.6946C58.4703 12.1919 58.2134 11.556 58.2134 10.7868C58.2134 10.2798 58.3376 9.80928 58.5859 9.37529C58.8343 8.93701 59.1768 8.59541 59.6136 8.35049ZM66.3836 4.57998H67.2828V14.2995H66.3836V4.57998ZM75.7934 12.3724L75.0355 11.9728C74.7615 12.4325 74.5067 12.7655 74.2712 12.9718C74.0356 13.178 73.7487 13.3435 73.4105 13.4681C73.0765 13.5927 72.7318 13.655 72.3763 13.655C71.6398 13.655 71.0211 13.395 70.5201 12.8751C70.0191 12.3509 69.76 11.6806 69.7429 10.8642H76.0247C76.0161 9.90596 75.7592 9.10674 75.2539 8.4665C74.5431 7.55986 73.5925 7.10654 72.402 7.10654C71.2459 7.10654 70.3231 7.54912 69.6337 8.43428C69.0899 9.13037 68.8179 9.92314 68.8179 10.8126C68.8179 11.7579 69.1391 12.6065 69.7814 13.3585C70.4237 14.1062 71.3144 14.48 72.4534 14.48C72.9673 14.48 73.4276 14.4026 73.8344 14.2479C74.2412 14.089 74.6073 13.8591 74.9327 13.5583C75.2582 13.2575 75.5451 12.8622 75.7934 12.3724ZM74.5088 8.93057C74.74 9.21846 74.9156 9.60303 75.0355 10.0843H69.8328C70.0169 9.43975 70.2888 8.95635 70.6485 8.63408C71.141 8.1915 71.7297 7.97021 72.4149 7.97021C72.8302 7.97021 73.2263 8.0583 73.6032 8.23447C73.98 8.41064 74.2819 8.64268 74.5088 8.93057Z"
                                    fill="#39444C" />
                                <path
                                    d="M0 20.495V1.50717C0 0.84457 0.382819 0.271817 0.938356 0L11.8841 10.9979L0.933954 22C0.380796 21.7274 0 21.1559 0 20.495ZM15.3567 14.4868L3.3882 21.4297L12.8275 11.9456L15.3567 14.4868ZM19.0769 9.66994C19.475 9.9761 19.7318 10.4585 19.7318 11.0011C19.7318 11.5356 19.4828 12.0115 19.0949 12.3182L16.5527 13.793L13.7707 10.9979L16.5508 8.2045L19.0769 9.66994ZM3.39522 0.573043L15.3548 7.51071L12.8275 10.05L3.39522 0.573043Z"
                                    fill="#39444C" />
                            </svg>

                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script lang="ts" setup>
import Navbar from '../navbar.vue';
import { ref } from 'vue';
import gsap from 'gsap'
import { ScrollTrigger } from 'gsap/ScrollTrigger';
// import { SplitText } from "gsap/SplitText";

const welcomeContainer = ref(null)
const title = ref(null);
const text = ref(null);
const moreButton = ref(null);
const downloadText = ref(null)
const downloadApple = ref(null);
const donwloadPlay = ref(null);
const navWelcome = ref(null);

onMounted(() => {
    gsap.registerPlugin(ScrollTrigger);

    const splitWords = (element: any) => {
        const words = element.innerText.split(" ");
        element.innerHTML = words.map((word: any) => `<span class="word">${word}</span>`).join(" ");
        return element.querySelectorAll(".word");
    };

    // const textWords = splitWords(text.value);
    // const downloadWords = splitWords(downloadText.value);

    const tl = gsap.timeline({
        scrollTrigger: {
            trigger: welcomeContainer.value,
        },
    });

    tl.from(navWelcome.value, {
        opacity: 0,
        y: 35,
        duration: 1,
        ease: "power4.out",
        delay: 0.68,
    })
        .from(title.value, {
            opacity: 0,
            y: 100,
            duration: 1,
            ease: "power4.out",
        }, "-=0.4") // Starts 0.4s after navWelcome animation starts
        // .from(text.value, { opacity: 0, y: 50, duration: 0.5, ease: "power3.out" }, "-=0.5")
        // .fromTo(
        //     textWords,
        //     { opacity: 0, y: "50%", ease: "power3.out" },
        //     {
        //         opacity: 1,
        //         y: "0%",
        //         duration: 0.5,
        //         ease: "power4.out",
        //         stagger: 0.07, // Smooth sequential animation
        //     },
        //     "-=0.4"
        // )
        .from(text.value, {
            opacity: 0,
            y: 100,
            duration: 1.2,
            ease: "power4.out",
        }, "-=0.4") 
        .from(moreButton.value, {
            opacity: 0,
            y: 32,
            duration: 1,
            ease: "power4.out",
        }, "-=0.2")
        .from(downloadApple.value, {
            opacity: 0,
            y: 32,
            duration: 1,
            ease: "power4.out",
        }, "-=0.8") // Overlapping animations
        .from(donwloadPlay.value, {
            opacity: 0,
            y: 32,
            duration: 1,
            ease: "power4.out",
        }, "-=0.8")
        // .fromTo(
        //     downloadWords,
        //     { opacity: 0, y: "50%" },
        //     {
        //         opacity: 1,
        //         y: "0%",
        //         duration: 0.5,
        //         ease: "power4.out",
        //         stagger: 0.07,
        //     },
        //     "-=0.4"
        // )
        .from(downloadText.value, {
            opacity: 0,
            y: 100,
            duration: 1,
            ease: "power4.out",
        }, "-=0.4") 
});

</script>

<style lang="scss" scoped>
.welcome {
    position: relative;
    width: 100%;
    height: 100vh;
    overflow: hidden;
}

.video-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    z-index: -1;
}

.overlay {
    position: absolute;
    bottom: 10%;
    left: 0;
    width: 100%;
    // transform: translate(-50%, -50%);
    color: white;

    @media (max-width: 1025px) {
        height: 100%;
        bottom: 0%;
    }
}

.word {
    display: inline-block;
    opacity: 0;
    transform: translateY(80px);
    /* Moves words downward initially */
}
</style>